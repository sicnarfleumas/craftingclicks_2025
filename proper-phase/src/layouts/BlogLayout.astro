---
import BaseLayout from './Layout.astro';

const {
  title,
  description,
  featuredImage,
  featuredImageAlt = '',
  pubDate,
  updatedDate,
  tags = [],
  author,
  readingTime,
} = Astro.props;

const pageTitle = `${title} — Crafting Clicks`;
const metaDescription = description ?? 'Blog post on Crafting Clicks';
---

<BaseLayout title={pageTitle} description={metaDescription}>
  <article class="mx-auto max-w-3xl px-4 py-10 prose prose-neutral prose-headings:font-extrabold">
    <header class="mb-8">
      <h1 class="text-3xl sm:text-4xl leading-tight tracking-tight">{title}</h1>
      <div class="mt-3 flex flex-wrap items-center gap-x-3 gap-y-2 text-sm text-neutral-600">
        {author && (<span>By {author}</span>)}
        {pubDate && (
          <time datetime={new Date(pubDate).toISOString()}>
            {new Date(pubDate).toLocaleDateString(undefined, { year: 'numeric', month: 'short', day: 'numeric' })}
          </time>
        )}
        {updatedDate && (
          <span>• Updated {new Date(updatedDate).toLocaleDateString(undefined, { year: 'numeric', month: 'short', day: 'numeric' })}</span>
        )}
        {readingTime && (<span>• {readingTime} min read</span>)}
      </div>

      {featuredImage && typeof featuredImage === 'string' && (
        <img
          src={featuredImage}
          alt={featuredImageAlt}
          class="mt-6 w-full rounded-xl border border-neutral-200 shadow-sm"
          loading="eager"
        />
      )}
      {featuredImage && typeof featuredImage === 'object' && (
        <img
          src={featuredImage.src}
          width={featuredImage.width}
          height={featuredImage.height}
          alt={featuredImageAlt}
          class="mt-6 w-full rounded-xl border border-neutral-200 shadow-sm"
          loading="eager"
        />
      )}
    </header>

    <slot />

    {tags?.length > 0 && (
      <footer class="mt-10 border-t pt-6">
        <div class="flex flex-wrap gap-2">
          {tags.map((t: string) => (
            <span class="rounded-full bg-neutral-100 px-3 py-1 text-xs text-neutral-700">#{t}</span>
          ))}
        </div>
      </footer>
    )}
  </article>
</BaseLayout>


